# 工具集网站任务清单

## 最高优先级任务 🚨
- [ ] 网站 SEO 优化
  - [ ] Meta 标签优化
    - [ ] 完善每个页面的 title 和 description
    - [ ] 添加关键词 meta 标签
    - [ ] 添加 Open Graph 标签支持
  - [ ] 结构化数据
    - [ ] 添加 JSON-LD 标记
    - [ ] 配置面包屑导航
  - [ ] 性能优化
    - [ ] 图片懒加载
    - [ ] 资源预加载
    - [ ] 代码分割
  - [ ] URL 优化
    - [ ] 规范化 URL 结构
    - [ ] 添加 sitemap.xml
    - [ ] 配置 robots.txt
  - [ ] 内容优化
    - [ ] 优化页面标题层级
    - [ ] 添加 alt 文本到图片
    - [ ] 优化内部链接结构

- [ ] 网站 VI 系统更新
  - [ ] 品牌标识更新
    - [ ] 更新网站图标（favicon）
    - [ ] 更新 Logo
    - [ ] 更新启动画面
  - [ ] 配色方案
    - [ ] 更新主题色值
    - [ ] 更新强调色
    - [ ] 更新背景色系
  - [ ] 字体系统
    - [ ] 更新字体家族
    - [ ] 更新字体大小
    - [ ] 更新字重设置
  - [ ] 组件样式
    - [ ] 更新按钮样式
    - [ ] 更新卡片样式
    - [ ] 更新表单元素样式
  - [ ] 动画效果
    - [ ] 更新过渡动画
    - [ ] 更新交互反馈
  - [ ] 图形元素
    - [ ] 更新图标系统
    - [ ] 更新插图风格
    - [ ] 更新装饰元素

- [ ] 网站数据统计与分析
  - [~] 统计代码框架搭建
    - [x] 创建统计服务封装层 (src/lib/analytics.js)
    - [x] 在应用入口添加初始化代码
    - [x] 在 Markdown 工具中添加事件跟踪
    - [ ] 代码调试和验证
      - [ ] 检查配置项是否正确
      - [ ] 验证路由跟踪是否生效
      - [ ] 验证事件跟踪是否正确
      - [ ] 修复 config.config.provider 的错误引用
      - [ ] 清理重复的统计代码（MarkdownChat.js 中的 window.MtaH5 调用）
  - [ ] 腾讯统计集成
    - [ ] 申请腾讯统计账号
    - [ ] 获取统计 ID 和应用 ID
    - [ ] 配置统计代码
    - [ ] 测试数据采集
  - [ ] 数据埋点
    - [ ] 页面访问统计
    - [ ] 功能使用统计
      - [ ] Markdown 转换次数
      - [ ] 复制代码次数
      - [ ] 其他工具使用次数
    - [ ] 用户行为分析
      - [ ] 访问时长
      - [ ] 访问路径
      - [ ] 功能使用频率
  - [ ] 数据分析后台
    - [ ] 访问量统计
    - [ ] 用户行为分析
    - [ ] 功能使用分析
    - [ ] 性能监控
    - [ ] 错误监控
  - [ ] 数据报表
    - [ ] 日报表
    - [ ] 周报表
    - [ ] 月报表
    - [ ] 自定义报表

- [ ] tinotools.cn 域名配置
  - [x] 购买域名
  - [x] 等待域名审核
  - [~] ICP 备案
    - [x] 准备备案材料
    - [x] 提交备案申请
    - [ ] 等待管局审核（约 10-20 个工作日）
  - [ ] 域名配置更新（备案通过后）
    - [ ] 更新 SSL 证书
    - [ ] 修改 Nginx 配置
    - [ ] 更新 DNS 解析记录
  - [ ] 更新网站代码
    - [ ] 检查并更新配置文件
    - [ ] 检查并更新 meta 标签
    - [ ] 检查并更新 manifest 文件
  - [ ] 验证新域名
    - [ ] 测试 HTTPS 访问
    - [ ] 测试所有功能正常

- [ ] 商标注册调研与申请
  - [ ] 前期调研
    - [ ] 寻找专业代理机构
    - [ ] 对比不同机构的服务和价格
    - [ ] 收集机构口碑评价
  - [ ] 商标设计与类别
    - [ ] "tinotools" 商标设计
    - [ ] "小匠工具集" 中文商标设计
    - [ ] 确定注册类别（软件服务类）
      - [ ] 第9类（软件）评估
      - [ ] 第42类（技术服务）评估
  - [ ] 申请准备
    - [ ] 准备注册所需材料
    - [ ] 商标查重检索
    - [ ] 评估注册成功率
  - [ ] 费用评估
    - [ ] 代理费用（预计1500-3000元/类）
    - [ ] 官费（300元/类）
    - [ ] 其他可能费用
  - [ ] 时间规划
    - [ ] 申请提交（具体时间待定）
    - [ ] 审查周期（预计8-12个月）
    - [ ] 后续维护计划

## 已完成事项 ✅
- [x] 配置 HTTPS
  - [x] 等待 SSL 证书签发
  - [x] 下载 Nginx 格式的证书文件（.crt 和 .key）
  - [x] 在服务器上配置证书
    - [x] 创建证书目录：/etc/nginx/ssl/
    - [x] 上传证书文件
    - [x] 设置证书文件权限
  - [x] 修改 Nginx 配置
    - [x] 添加 443 端口监听
    - [x] 配置 SSL 证书路径
    - [x] 配置 SSL 协议和加密套件
    - [x] 添加 HTTP 自动跳转 HTTPS
    - [x] 配置 HSTS（HTTP Strict Transport Security）
  - [x] 测试 HTTPS 配置
    - [x] 确认所有页面都使用 HTTPS
- [x] 创建 Markdown 转微信公众号聊天气泡工具
  - [x] 实现基础功能
  - [x] 页面开发
  - [x] 样式开发
- [x] Git 仓库初始化和配置
- [x] 服务器部署
  - [x] 安装必要软件（Node.js、Nginx、PM2）
  - [x] 配置 Nginx
  - [x] 配置 PM2
  - [x] 部署项目代码
  - [x] 启动服务
- [~] 网站图标（favicon）实现
  - [x] 创建基础图标文件结构
  - [x] 配置网站图标引用
  - [x] 生成多尺寸图标
  - [ ] 遗留问题：
    - 图标生成过程中目录结构混乱，需要重新规范化
    - 图标文件的组织方式需要优化，建议统一放在 `public/images/brand/` 下
    - 缺少图标版本控制和更新机制
    - 需要添加图标使用指南文档

## 待办事项 📝

### 自动化部署 🔄
- [ ] 配置 GitHub Actions
  - [ ] 创建部署密钥（Deploy Keys）
  - [ ] 配置 GitHub Secrets
    - [ ] 服务器 IP
    - [ ] SSH 私钥
    - [ ] 环境变量
  - [ ] 编写 GitHub Actions 工作流
    - [ ] 设置 Node.js 环境
    - [ ] 安装依赖
    - [ ] 运行测试（待添加）
    - [ ] 构建项目
    - [ ] 部署到服务器
  - [ ] 配置自动化流程
    - [ ] main 分支提交触发部署
    - [ ] Pull Request 触发测试
    - [ ] 部署成功通知
  - [ ] 编写部署文档
    - [ ] 环境配置说明
    - [ ] 部署流程说明
    - [ ] 回滚方案
    - [ ] 故障处理指南

### 界面优化
- [ ] 添加网站图标（favicon）
  - [ ] 设计网站 logo
  - [ ] 生成多尺寸 favicon
  - [ ] 添加到 public 目录
  - [ ] 更新 HTML head 配置

### 功能优化
- [ ] Markdown 转换工具优化
  - [ ] 修复公众号格式问题
    - [ ] 实现基础 Markdown 转换
      - [ ] 分析并实现 md.axiaoxin.com 的转换格式
      - [ ] 实现段落 `<p>` 样式
      - [ ] 实现列表 `<ul>` `<ol>` 样式
      - [ ] 实现加粗、斜体、代码等内联样式
      - [ ] 实现引用块样式
    - [ ] 添加聊天气泡样式
      - [ ] 设计气泡布局结构
      - [ ] 实现左右对话样式
      - [ ] 添加时间戳样式
      - [ ] 调整气泡圆角和颜色
    - [ ] 优化复制功能
      - [ ] 实现富文本复制
      - [ ] 测试公众号编辑器兼容性
      - [ ] 处理特殊字符和换行
  - [ ] 优化代码块显示
  - [ ] 添加图片上传功能
  - [ ] 添加表情符号支持

### 部署优化
- [ ] 配置 CDN
- [ ] 添加监控告警
- [ ] 域名配置更新
  - [ ] 更换为 tinotools 域名
    - [ ] 申请新域名备案
    - [ ] 更新 SSL 证书
    - [ ] 修改 Nginx 配置
    - [ ] 更新 DNS 解析记录
  - [ ] 更新网站代码中的域名引用
    - [ ] 检查并更新配置文件
    - [ ] 检查并更新 meta 标签
    - [ ] 检查并更新 manifest 文件
  - [ ] 验证新域名访问
    - [ ] 测试 HTTPS 访问
    - [ ] 测试所有功能正常
- [ ] 配置域名解析
  - [x] 添加 DNS 记录
  - [x] 修改 Nginx 配置
  - [x] 等待 DNS 生效

### 文档完善
- [ ] 更新技术文档
- [ ] 添加部署文档
- [ ] 完善开发指南

## 进行中的任务 🚀
- [x] SSL 证书申请和配置
  - [x] 申请免费 SSL 证书
  - [x] 添加 DNS 验证记录
  - [x] 通过域名验证
  - [x] 等待证书签发

## 待讨论事项 💭
- [ ] 项目进度回顾
- [ ] 功能优先级确认
- [ ] 监控方案讨论

## 注意事项 ⚠️
- 任务完成后不删除，标记为已完成 [x]
- 任务需要测试通过才能标记完成
- 新增任务及时添加到清单
- 重要更新同步至 Git 提交

## 经验教训 📝
- 图标资源管理：
  - 需要提前规划好资源文件的目录结构
  - 建立清晰的资源命名规范
  - 保留原始设计文件
  - 建立资源更新流程
- 开发流程：
  - 在进行资源替换时，应该先备份原有文件
  - 需要建立更好的文件组织规范
  - 图标更新后需要添加版本号便于追踪

## 资源管理问题记录 🗂
### 现状
- [x] MasterGo MCP 集成
  - [x] 支持从 MasterGo 获取设计资源
  - [x] 支持实时更新设计变更
  - [ ] 需要完善设计资源的版本追踪
- [ ] 其他资源管理问题
  - [ ] 缺少统一的资源管理策略
  - [ ] 资源文件散落在不同目录
  - [ ] 缺少资源版本控制
  - [ ] 缺少资源更新日志

### 改进计划
1. 资源目录结构规范
```
public/
  ├── assets/           # 静态资源根目录
  │   ├── brand/       # 品牌资源
  │   │   ├── logo/    # Logo 相关
  │   │   ├── icons/   # 图标资源
  │   │   └── fonts/   # 字体资源
  │   ├── images/      # 图片资源
  │   │   ├── common/  # 通用图片
  │   │   └── tools/   # 工具相关图片
  │   └── docs/        # 文档资源
```

2. 版本控制策略
   - 为每个资源添加版本号（v1.0.0 格式）
   - 在资源文件名中包含版本信息
   - 保留重要版本的历史文件
   - 建立资源更新日志（CHANGELOG.md）

3. 资源同步流程
   - MasterGo 设计资源 -> 自动同步到 assets/brand/
   - 手动更新资源 -> 必须更新版本号和日志
   - 定期清理未使用的历史资源

4. 文档要求
   - 每个资源目录必须包含 README.md
   - 记录资源的使用说明和注意事项
   - 记录资源的更新历史
   - 说明资源的命名规范

### 待办任务
- [ ] 创建资源管理文档
  - [ ] 编写资源组织规范
  - [ ] 制定版本号规则
  - [ ] 建立更新流程指南
- [ ] 重构资源目录
  - [ ] 创建标准化目录结构
  - [ ] 迁移现有资源
  - [ ] 添加必要的说明文档
- [ ] 实现版本控制
  - [ ] 创建 CHANGELOG.md
  - [ ] 为现有资源添加版本号
  - [ ] 建立资源备份机制

### 缓存机制实施计划

### 1. Service Worker 基础设施 [✓]
- [✓] 创建 Service Worker 文件 (public/sw.js)
- [✓] 实现基本的资源缓存策略
  - [✓] HTML 文件（Network First）
  - [✓] 静态资源（Cache First）
  - [✓] API 请求（Network Only）
  - [✓] 其他资源（Stale While Revalidate）
- [✓] 添加 Service Worker 注册逻辑
- [✓] 实现缓存版本控制

### 2. 更新机制 [✓]
- [✓] 创建版本控制工具 (src/utils/version.js)
- [✓] 实现更新检测逻辑
- [✓] 添加更新提示组件
- [✓] 实现定期检查更新
- [✓] 添加网络状态监听

### 3. Nginx 缓存配置 [ ]
- [ ] 配置静态资源缓存规则
  - [ ] 图片、字体等长期缓存
  - [ ] JS/CSS 文件使用版本号
- [ ] 配置 HTML 文件缓存控制
- [ ] 配置 API 请求缓存规则
- [ ] 添加必要的缓存头部

### 4. 开发和调试工具 [ ]
- [ ] 添加 Service Worker 开发模式
- [ ] 实现缓存清理功能
- [ ] 添加调试日志
- [ ] 创建测试用例

### 5. 文档和监控 [ ]
- [ ] 编写缓存策略文档
- [ ] 添加缓存监控指标
- [ ] 创建故障排除指南
- [ ] 编写维护说明

### 6. 测试和优化 [ ]
- [ ] 进行性能测试
- [ ] 测试离线功能
- [ ] 验证更新机制
- [ ] 进行兼容性测试
- [ ] 优化缓存策略

# 待办清单

## GitHub Actions 部署配置

### 腾讯云安全组自动配置
- [ ] 准备腾讯云凭证
  - [ ] `TENCENTCLOUD_SECRET_ID` - 在腾讯云访问密钥管理获取
  - [ ] `TENCENTCLOUD_SECRET_KEY` - 在腾讯云访问密钥管理获取
  - [ ] `SECURITY_GROUP_ID` - 在腾讯云安全组页面获取
  - [ ] `REGION` - 服务器所在地区（如：ap-guangzhou）

- [ ] GitHub 配置
  - [ ] 在仓库的 Settings -> Secrets -> Actions 中添加上述四个 secret
  - [ ] 确认安全组 ID 是否正确
  - [ ] 确认 API 密钥有操作安全组的权限

- [ ] 部署脚本更新
  - [ ] 添加安全组配置步骤
  - [ ] 添加自动清理步骤
  - [ ] 添加错误处理和日志记录

### 注意事项
- 配置会在每次部署时动态添加和删除安全组规则
- 只开放 22 端口（SSH）的访问
- 仅允许 GitHub Actions 运行器的 IP 访问
- 确保在部署完成后清理安全组规则
- 考虑添加超时机制，避免规则残留 